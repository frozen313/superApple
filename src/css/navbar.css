:root {
  --nav-height: 44px;
  --nav-bg: rgba(251, 251, 253, 0.8);
  --mask-bg: rgba(0, 0, 0, 0.4);
  --anim-duration: 0.3s;
}

/* 全局重置 */
ul, li { list-style: none; padding: 0; margin: 0; }
a { text-decoration: none; color: inherit; cursor: pointer; }

/* --- 导航栏容器 --- */
.nav-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--nav-height);
  z-index: 999;
  
  display: flex;
  justify-content: center;
  
  background-color: var(--nav-bg);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  transition: background-color 0.3s ease;
}

.nav-list {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  max-width: 980px;
  padding: 0 22px;
  margin: 0;
  height: 100%;
}

.nav-item {
  height: 100%;
  display: flex;
  align-items: center;
  position: static; /* 让内部绝对定位相对于 container */
}

.nav-link {
  font-size: 12px;
  color: #1d1d1f;
  opacity: 0.8;
  transition: opacity 0.3s;
  padding: 0 10px;
  white-space: nowrap;
}
.nav-link:hover { opacity: 1; }

/* --- 下拉菜单核心 (关键优化) --- */
.nav-dropdown {
  position: absolute;
  top: var(--nav-height);
  left: 0;
  width: 100%;
  background: #fbfbfd;
  color: #1d1d1f;
  
  height: auto;
  min-height: 200px;
  padding: 40px 0 80px 0;
  border-bottom: 1px solid #d2d2d7;
  z-index: 1000;
  
  /* 默认隐藏状态 */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  
  /* 默认带有向上位移（用于首次滑出） */
  transform: translateY(-10px);
  
  /* 【关闭时】动画要快，且不要位移，防止重影 */
  transition: opacity 0.2s ease, visibility 0s linear 0.2s;
  
  /* 布局 */
  display: flex;
  justify-content: center;
}

/* 激活状态 */
.nav-dropdown.is-active {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateY(0);
  
  /* 【打开时】带有位移和透明度动画 */
  transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
}

/* 
   ★ 核心黑科技：解决切换时不流畅的问题
   当导航栏背景已经是白色时（说明正在浏览菜单），
   后续打开的菜单强制取消位移动画，只保留透明度渐变。
*/
.nav-container.is-hovering .nav-dropdown {
    transform: none !important;
}
.nav-container.is-hovering .nav-dropdown.is-active {
    transition: opacity 0.3s ease; /* 只有 fade-in */
}


/* --- 下拉内容排版 --- */
.nav-dropdown-content {
  width: 100%;
  max-width: 980px;
  padding: 0 22px;
  display: flex;
  align-items: flex-start;
}

.nav-column { margin-right: 80px; }
.nav-column h3 {
  font-size: 12px;
  color: #86868b;
  margin-bottom: 15px;
  font-weight: 400;
}
.nav-column ul li a {
  display: block;
  font-size: 12px;
  line-height: 2.4;
  font-weight: 600;
  color: #1d1d1f;
}
.nav-column ul li a:hover { color: #0066cc; }

/* --- 遮罩层 --- */
#blur-mask {
  position: fixed;
  top: var(--nav-height);
  left: 0;
  width: 100vw;
  height: calc(100vh - var(--nav-height));
  background-color: var(--mask-bg);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  z-index: 900;
  
  transition: opacity 0.3s ease, visibility 0s linear 0.3s;
}

#blur-mask.is-visible {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition: opacity 0.3s ease, visibility 0s linear 0s;
}

/* 导航栏变白状态 */
.nav-container.is-hovering {
  background: #fbfbfd;
}